default_config:
script: !include scripts.yaml
automation: !include automations.yaml
frontend:
  themes:
    !include_dir_merge_named themes
lovelace:
  mode: yaml
  resources:
    - url: /hacsfiles/mini-media-player/mini-media-player-bundle.js
      type: module
    - url: /hacsfiles/mini-graph-card/mini-graph-card-bundle.js
      type: module
    - url: /hacsfiles/simple-thermostat/simple-thermostat.js
      type: module
    - url: /hacsfiles/lovelace-mushroom/mushroom.js
      type: module

influxdb:
  api_version: 2
  ssl: false
  host: !secret hostname
  port: 8086
  token: !secret ha-influxdb-token
  organization: home
  bucket: Home Assistant

sensor:
  - platform: template
    sensors:
      target_temperature:
        unique_id: target_temperature
        friendly_name: 'Target Temperature'
        unit_of_measurement: 'Â°C'
        value_template: >
          {{ state_attr('climate.ecobee', 'temperature') }}
      hvac_action:
        unique_id: hvac_action
        friendly_name: 'HAVC Action'
        value_template: >
          {% if is_state_attr('climate.ecobee', 'hvac_action', 'heating') %} Heating
          {% elif is_state_attr('climate.ecobee', 'hvac_action', 'cooling') %} Cooling
          {% else %} Idle
          {% endif %}
      fan_action:
        unique_id: fan_action
        friendly_name: 'Fan Action'
        value_template:  >
          {% if is_state_attr('climate.ecobee', 'fan', 'on') %} On
          {% else %} Off
          {% endif %}
      ups_real_time_energy:
        unique_id: ups_real_time_energy
        friendly_name: 'UPS Real time energy'
        unit_of_measurement: W
        device_class: power
        value_template:  >
          {{ (states('sensor.ups_load') | float) / 100 * 330 }}

media_player:
  - platform: universal
    name: Sony BRAVIA Soundbar
    unique_id: sony_bravia_soundbar_receiver
    children:
      - media_player.sony_bravia_soundbar
    device_class: receiver
    commands:
      turn_on:
        service: media_player.turn_on
        data: {}
        target:
          entity_id: media_player.sony_bravia_soundbar

panel_iframe:
  adguard_home:
    title: 'AdGuard Home'
    url: 'http://192.168.1.100:3000'
    icon: 'mdi:shield-check'
  nginx:
    title: '404'
    url: 'http://192.168.1.100:8080'
    icon: 'mdi:web'
  goaccess:
    title: 'GoAccess'
    url: 'http://192.168.1.100:7889'
    icon: 'mdi:google-analytics'
  influxdb:
    title: 'InfluxDB'
    url: 'http://192.168.1.100:8086/'
    icon: 'mdi:database'